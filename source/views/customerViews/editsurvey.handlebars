<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>Dashboard</title>
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
		name='viewport' />
	<link rel="stylesheet" href="/assets/css/breadcrumbs.css">
	<link rel="stylesheet" href="/assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="/assets/css/bootstrap-slider.min.css">
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i">
	<link rel="stylesheet" href="/assets/css/ready.css">
	<link rel="stylesheet" href="/assets/css/demo.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
		integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

  <style>
   .slider-horizontal{margin-right: 20px !important;}
  </style>
    <script src="/assets/js/breadcrumbs.js"></script>
<script src="/assets/js/core/jquery.3.2.1.min.js"></script>
<script src="/assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
<script src="/assets/js/core/popper.min.js"></script>
<script src="/assets/js/core/bootstrap.min.js"></script>
<script src="/assets/js/core/bootstrap-slider.min.js"></script>
<!--<script src="/assets/js/plugin/chartist/chartist.min.js"></script>
<script src="/assets/js/plugin/chartist/plugin/chartist-plugin-tooltip.min.js"></script>-->
<!--<script src="/assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script>-->
<script src="/assets/js/plugin/bootstrap-toggle/bootstrap-toggle.min.js"></script>
<script src="/assets/js/plugin/jquery-mapael/jquery.mapael.min.js"></script>
<script src="/assets/js/plugin/jquery-mapael/maps/world_countries.min.js"></script>
<script src="/assets/js/plugin/chart-circle/circles.min.js"></script>
<script src="/assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>
<script src="/assets/js/ready.min.js"></script>
<!--<script src="/assets/js/demo.js"></script>-->
  <script>
  var globalScope ={};
 function complexity(qno,cf){
      
       globalScope['slider'+qno]= new Slider("#q"+qno+"Complexity", {
                                                        ticks: [1, 3, 5],
                                                        ticks_labels: ['Low', 'Medium', 'High'],
                                                        ticks_snap_bounds: 1,
														value: cf
                                                        });
            //$("#q"+qno+"Complexity").val('3');
     
  }
 </script>
</head>
<body>
    <div class="wrapper">
    <div class="main-header">
			<div class="logo-header">
				<a href="/customer/" class="logo">
					<img src="/assets/logo/logo.png" alt="logo" height="40" width="150">
				</a>
				<button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-controls="sidebar" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<button class="topbar-toggler more"><i class="la la-ellipsis-v"></i></button>
			</div>
			<nav class="navbar navbar-header navbar-expand-lg">
				<div class="container-fluid">
					<form class="col-md-10 navbar-left navbar-form nav-search mr-md-3" action="" id="search">
						<div class="input-group input-square">
							<input type="text" placeholder="Search ..." class="form-control input-square">
							<div class="input-group-append">
								<span class="input-group-text">
									<i class="la la-search search-icon"></i>
								</span>
							</div>
						</div>
					</form>
					<ul class="navbar-nav topbar-nav ml-md-auto align-items-center">
						<li class="btn">
							<a href="/customer/createsurvey">
								<button class="btn btn-primary">Create Survey</button>
							</a>
						</li>

					</ul>
				</div>
			</nav>
			</div>
		<div class="sidebar">
				<div class="scrollbar-inner sidebar-wrapper">
					<div class="user">
						<div class="photo">
							<img src="/assets/img/nasir.jpg">
						</div>
						<div class="info">
							<a class="" data-toggle="collapse" href="#collapseExample" aria-expanded="true">
								<span>
									Nasir Ali
									{{!-- <span class="user-level">Business Analyst</span> --}}
									<span class="caret"></span>
								</span>
							</a>
							<div class="clearfix"></div>

							<div class="collapse in" id="collapseExample" aria-expanded="true" style="">
								<ul class="nav">
									{{!-- <li>
										<a href="#profile">
											<span class="link-collapse">My Profile</span>
										</a>
									</li> --}}
									<li>
										<a href="/customer/logout">
											<span class="link-collapse">Logout</span>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<ul class="nav">
						<li class="nav-item active">
							<a href="/customer/">
								<i class="la la-home"></i>
								<p>Dashboard</p>
								
							</a>
						</li>
						<li class="nav-item">
							<a href="/customer/openSurvey">
								<i class="la la-check-circle-o"></i>
								<p>Open Surveys</p>
								
							</a>
						</li>
						<li class="nav-item">
							<a href="/customer/closedSurvey">
								<i class="la la-clock-o la"></i>
								<p>closed Surveys</p>
								
							</a>
						</li>
						<li class="nav-item">
							<a href="/customer/draftSurvey">
								<i class="la la-pencil-square"></i>
								<p>Draft Surveys</p>
								
							</a>
						</li>

					</ul>
				</div>
			</div>
            <div class="main-panel">
			<div class="content">
				<div class="container-fluid">
					<!-- breadcrumbs-->
					<div class="breadcrumb" style="background:none;">
						<a class="col-sm-4 breadcrumb__step breadcrumb__step--active" href="/customer/editsurvey">Design Survey</a>
						<a class="col-sm-4 breadcrumb__step " href="/customer/targetaudience">Target Audience</a>
						 <a class="col-sm-4 breadcrumb__step " href="/customer/buypackage">Buy Package</a></div>
                    <!-- end breadcrumbs-->
					 <main class="dash-content">
						<div class="container">
							<div class="row">
								<div class="col-xl-12">
									<div class="card spur-card">
										<div class="card-header">
											<div class="row" style="margin-top: 5px;">
												<div class="col-md-12 survey">
													<form name="surveyInfo" id="surveyInfo">
													<input type="text" class="form-control" name="surveyTitle" id="surveyTitle"
														name=" title" placeholder="Survey title" value="{{title}}"
														style=" font-size: 24px; border: none; word-wrap:break-word ">
													<hr>
													<textarea class="form-control" name="surveyDesc" id="surveyDesc"
														placeholder="Type Survey description...." value="{{description}}"
														style="border:none">{{description}}</textarea>
                                                     </form>

												</div>
											</div>
										</div>
										<div class="card-body">
											<div class="survey">
												
												<!-- Survey Question Devision -->
												<div id="question-block">
                                                        <script>
                                                            let c;
															let t;
                                                            let r;
                                                            let id = '1565023337490';
                                                        </script>    
                               

                                                 {{#each questions}}
                                                 
                                                <script>
                                                 var qno='{{@key}}';
                                                 
                                                   
                                                  if('{{q_type}}'=='radio') 
                                                  { 
                                                   r = ` 
                                                    <form id="q{{@key}}Form" name="q{{@key}}Form">
                                                <div id="q{{@key}}" class=" container p-0 question" style="margin-top: 5px;  ">
                                                      <div class="row col-sm-12 " style=" margin: 0px auto">
                                                           <div class="col-sm-1 pt-2">
                                                                <span class="qNo" id="q_no{{@key}}">Q{{q_no}}.</span>
                                                                 </div>
                                                            <div class="col-sm-9 form-group p-0" style="margin: 0">
                                                            <input id="q{{@key}}Title" name="q{{@key}}Title" type="text" class="form-control input-square qInput" value="{{title}}" placeholder="Question Title" >
                                                            </div> 
                                                            <div class="col-sm-2 ">
                                                            <select id="q{{@key}}OptionType" name="q{{@key}}OptionType" class="form-control input-square qEdit">
                                                            <option value="0" selected>Radio</option>
                                                            <option value="1">Checkbox</option> 
                                                            <option value="2">Text</option> 
                                                            </select> 
                                                            </div> 
                                                            </div> 
                                                            <div id="q{{@key}}OptionBlock" class="mt-3"  >
                                                                    {{#each options}}
                                                                
                                                              
                                                   <div class="row col-sm-12 option" style=" margin:0px 0px 2px 0px "> 
                                                              <div class="col-sm-1 pt-1">
                                                                   <label class="form-radio-label">
                                                                        <input class="form-radio-input" type="radio" name="optionsRadios" value="" disabled>
                                                                         <span class="form-radio-sign"></span>
                                                                    </label>
                                                              </div> 
                                                              <div class="col-sm-9 form-group p-0">
                                                                <input class="qInput" type="text" placeholder="option.." id="q${qno}Option{{@key}}" name="q${qno}Option{{@key}}" value="{{op_title}}" style="width: 100%"/>
                                                              </div> 
                                                              <div class="col-sm-2 container-fluid pt-1" style="text-align: center">
                                                                   <i id="q${qno}Option{{@key}}Del" style="cursor:pointer;" class="la la-minus-square la-2x delOption"></i>
                                                                   <i id="q${qno}Option{{@key}}Add" style="cursor:pointer;" class="la la-plus-square la-2x addOption"></i>
                                                              </div> 
                                                            </div>
                                                            {{/each}}
                                                        </div> 
                                                        
                                                     
                                                         <div style="text-align: right;padding-right:29px;">
                                                            <span style="font-size:19px;">Complexity Level
                                                                <i  data-toggle="tooltip" data-placement="bottom" title="Chawala help Chahi di a" style="font-size:20px;" class="la la-question-circle "></i>
                                                                </span> &nbsp; &nbsp; 
                                                                <input id="q{{@key}}Complexity" name="q{{@key}}Complexity" type="text" />  
                                                                <button id="q{{@key}}Save" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 saveQuestion" disabled style="border:1px solid green;background:white;width:60px;margin:5px 5px !important;">
                                                                    <i  class="fa fa-check" style="color:green;  "></i>
                                                                </button> 
                                                                <button id="q{{@key}}Del" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 delQuest"  style="border:1px solid red;background:white;width:60px;margin:0px 5px !important;" >
                                                                    <i  class="fa fa-trash" style="color:red;  "></i>
                                                                </button> 
                                                                </div> 
                                                                <hr style="width:70%">
                                                                 </div>
                                                        </form> `;
                                                  
                                                document.write(r);
												complexity('{{@key}}','{{cf}}');
                                                  
                                                  }
                                                  else if('{{q_type}}'=='checkbox'){
													  c=` <form  id="q{{@key}}Form" name="q{{@key}}Form"> 
														  <div id="q{{@key}}" class=" container p-0 question"style="margin-top: 5px;  ">
															   <div class="row col-sm-12 " style=" margin: 0px auto"> 
																   <div class="col-sm-1 pt-2"> <span class="qNo" id="q_no{{@key}}">Q{{q_no}}.</span>
																    </div> <div class="col-sm-9 form-group p-0" style="margin: 0">
																	 <input id="q{{@key}}Title" value="{{title}}" name="q{{@key}}Title" type="text" class="form-control input-square qInput"  placeholder="Question Title" > 
																	 </div> 
																	 <div class="col-sm-2 "> 
																 <select id="q{{@key}}OptionType" name="q{{@key}}OptionType" class="form-control input-square qEdit">
																	<option value="0">Radio</option> 
																	<option value="1" selected>Checkbox</option> 
																	<option value="2">Text</option> 
																  </select> 
																</div>
															 </div>
                                                           <div id="q{{@key}}OptionBlock" class="mt-3"  >
                                                                 {{#each options}}
                                                             <div class="row col-sm-12 option" style=" margin:0px 0px 2px 0px "> 
																 <div class="col-sm-1 pt-1"> <label class="form-check-label" style="width: 100%" > 
																	 <input class="form-check-input" type="checkbox" value="" disabled> 
																	 <span class="form-check-sign" ></span> </label>
																	  </div> 
																	  <div class="col-sm-9 form-group p-0"> 
																		<input class="qInput" type="text" placeholder="option.." name="q${qno}Option{{@key}}" id="q${qno}Option{{@key}}" value="{{op_title}}" style="width: 100%"> 
																		</div> 
																		<div class="col-sm-2 container-fluid pt-1" style="text-align: center"> 
																		<i id="q${qno}Option{{@key}}Del" style="cursor:pointer;" class="la la-minus-square la-2x delOption"></i>
																		<i id="q${qno}Option{{@key}}Add" style="cursor:pointer;" class="la la-plus-square la-2x addOption"></i>
																		</div> 
																		</div>
                                                                  {{/each}}
                                                             </div>
                                                           <div style="text-align: right;padding-right:29px;">
															    <span style="font-size:19px;">Complexity Level
																	<i  data-toggle="tooltip" data-placement="bottom" title="Chawala help Chahi di a" style="font-size:20px;" class="la la-question-circle "></i> 
																	</span> &nbsp; &nbsp; 
																	<input id="q{{@key}}Complexity" name="q{{@key}}Complexity" type="text" /> 
																	<button id="q{{@key}}Save" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 saveQuestion" disabled style="border:1px solid green;background:white;width:60px;margin:0px 5px !important;">
																	<i  class="fa fa-check" style="color:green;  "></i> 
																	</button> 
																	<button id="q{{@key}}Del" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 delQuest"  style="border:1px solid red;background:white;width:60px;margin:0px 5px !important;" > 
																	<i  class="fa fa-trash" style="color:red;  "></i>
																	</button> 
																	</div> 
																	<hr style="width:70%"> 
																	</div> 
																	</form>`;
                                                             document.write(c);
                                                             complexity('{{@key}}','{{cf}}');

                                                  }
												  else if('{{q_type}}'=='text'){
                                                    t=` <form id="q{{@key}}Form" name="q{{@key}}Form">
														<div class="container p-0 question" id="q{{@key}}" style="margin-top: 5px;  ">  
														<div class="row col-sm-12 " style=" margin: 0px auto"> 
														<div class="col-sm-1 pt-2 col-xs-1"> 
														<span class="qNo" id="q_no{{@key}}">Q{{q_no}}.</span> 
														</div> 
														<div class="col-sm-9 form-group p-0 col-xs-2" style="margin: 0"> 
														<input id="q{{@key}}Title" name="q{{@key}}Title" value="{{title}}" type="text" class="form-control input-square qInput"  placeholder="Question Title" >
														</div>
														<div class="col-sm-2 col-xs-2 "> 
														<select id="q{{@key}}OptionType" name="q{{@key}}OptionType" class="form-control input-square qEdit" >
														<option value="0">Radio</option> 
														<option value="1">Checkbox</option> 
														<option value="2" selected>Text</option>
														</select>
														</div> 
														</div> 
														<div id="q{{@key}}OptionBlock" class="mt-3" ></div>
														<div style="text-align: right;padding-right:29px;">
														<span style="">Complexity Level<i  data-toggle="tooltip" data-placement="bottom" title="Chawala help Chahi di a" style="font-size:22px;" class="la la-question-circle "></i>
														</span> &nbsp; &nbsp; 
														<input id="q{{@key}}Complexity" name="q{{@key}}Complexity" type="text" /> 
														<button id="q{{@key}}Save" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 saveQuestion" disabled style="border:1px solid green;background:white;width:60px;margin:0px 5px !important;">
														<i  class="fa fa-check" style="color:green;  "></i>
														</button> 
														<button id="q{{@key}}Del" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 delQuest"  style="border:1px solid red;background:white;width:60px;margin:0px 5px !important;" >
														<i  class="fa fa-trash" style="color:red;  "></i>
														</button> </div> <hr style="width:70%">
														 </div>
														 </form>`;
                                                   document.write(t);
												   complexity('{{@key}}','{{cf}}');
                                                  
												  }
                                                        
                                                 
                                                  
                                                   </script>

				                            	{{/each}}
                                                
												</div>
												
											</div>
											<!-- Survey Tag end -->
                                             
                                                  
											<div style="text-align: center; margin: 30px 0px 50px 0px">
													<button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">

															<i class="fa fa-plus-circle fa-lg"></i> New Question
														</button>
														<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
			                                                    <a class="dropdown-item questType"  href="0">Radio</a>
																<a class="dropdown-item questType"  href="1">CheckBox</a>
																<a class="dropdown-item questType" href="2">Text</a>

														</ul>

											</div>

										</div>
									</div>
								</div>
							</div>
						</div>

				</div>
			</div>


		</div>
        </div>
        </body>



<script>
	$(document).ready(function () {
      
      /* qArray.forEach(function (obj) 
       { 
       globalScope['slider'+(obj.qno)]= new Slider("#q"+(obj.qno)+"Complexity", {
                                                        ticks: [1, 3, 5],
                                                        ticks_labels: ['Low', 'Medium', 'High'],
                                                        ticks_snap_bounds: 1 
                                                        });
            $("#q"+(obj.qno)+"Complexity").val(obj.cf);
       }); */


       function tooltip() {
         $('[data-toggle="tooltip"]').tooltip();
       }

        function serialize(){  //serialize Q numbers
			   i=1;
			   $("#question-block > form").each(function(){
                 $(this).children('.question').children().children().children(".qNo").html("Q"+(i++)+".");
				 //alert($(this).children('.question').children().children().children(".qNo").html("Q"+(i++)+"."));
			   });
        }





       $(document).on("change","#surveyTitle , #surveyDesc",function(){
                 var  data = $("#surveyInfo").serialize()+"&id="+id;
				  $.ajax({
                type: 'post',
                url: '/customer/updatesurvey',
                data: data,
                dataType: 'json'
            })
            .done( (response) =>{
                console.log(response);
                if(!response){
                  //  $('#alert').css("visibility","visible").text("this email is already exists!");
					console.log('ajax res', response);
			    }
                else {
					console.log('ajax res not found');

                }
            })
	   });



	   $(document).on("click",".saveQuestion",function(e){
		   e.preventDefault();
           var formid=$(this).attr('id').match(/\d+/);
		   let q_no = $('#q_no'+formid).html().match(/\d+/);
          var  data = $('#q'+formid+'Form').serialize()+"&qid="+formid+"&q_no="+q_no+"&sid="+id;
		  alert("alert");
		console.log("data=>",data);
		  console.log(data);
            $.ajax({
                type: 'post',
                url: '/customer/addQuestion',
                data: data,
                dataType: 'json'
            })
            .done( (response) =>{
                console.log(response);
                if(!response){
                  //  $('#alert').css("visibility","visible").text("this email is already exists!");
					console.log('ajax res', response);
			    }
                else {
					console.log('ajax res not found');

                }
            })
	   });

	   $(document).on("click",".delQuest",function(e){ //function for delete questions and serialize Q number
              e.preventDefault();
			   let sid=id;
			   let qid=parseInt($(this).attr("id").match(/\d+/)[0]);

			    var data = {
            'qid': qid,
			'sid': sid
       };
				 $.ajax({
                type: 'post',
                url: '/customer/deletequestion',
                data: data,
                dataType: 'json'
            })
            .done( (response) =>{
               //console.log('response',response);
                if(response== '1'){
				  console.log('ajax res', response);
				  var delid=$(this).attr('id').match(/\d+/);
                  $("#q"+delid+"Form").remove();

			    }
                else {
				  console.log('ajax res not found');
                }
            })




                serialize();

	   });

	   $(document).on("keyup",".qInput",function(){  //function for enable save button
        var enableid=$(this).attr('id').match(/\d+/);
            $("#q"+enableid+"Save").prop("disabled",false);
			//$("#question-block").each(=>{
               // $(this).children()
			//});
	   });

		$(document).on("click",".questType",function(e){  //function for add question
			e.preventDefault();

			var totalinputs = $("#question-block");
			maxid = $(totalinputs[0]).children('form').length;
			//console.log('maxid',maxid);
			if(maxid !=0 ){
				console.log(parseInt($(totalinputs[0]).children('form').last().children('.question').attr("id").match(/\d+/)[0])+1);
				maxid=parseInt($(totalinputs[0]).children('form').last().children('.question').attr("id").match(/\d+/)[0])+1;
			}
			else
			{
				maxid++;
			}
			 console.log('maxid',maxid);

                  if($(this).attr('href')==0)
                  {
                  	 $('#question-block').append('<form id="q'+maxid+'Form" name="q'+maxid+'Form"><div id="q'+ maxid +'" class=" container p-0 question" style="margin-top: 5px;  ">  <div class="row col-sm-12 " style=" margin: 0px auto"> <div class="col-sm-1 pt-2"> <span class="qNo" id="q_no'+maxid+'">Q'+maxid+'.</span> </div> <div class="col-sm-9 form-group p-0" style="margin: 0"> <input id="q'+ maxid +'Title" name="q'+ maxid +'Title" type="text" class="form-control input-square qInput" placeholder="Question Title" > </div> <div class="col-sm-2 "> <select id="q'+ maxid +'OptionType" name="q'+ maxid +'OptionType" class="form-control input-square qEdit"><option value="0" selected>Radio</option> <option value="1">Checkbox</option> <option value="2">Text</option> </select> </div> </div> <div id="q'+maxid+'OptionBlock" class="mt-3"  > <div class="row col-sm-12 option" style=" margin:0px 0px 2px 0px "> <div class="col-sm-1 pt-1"> <label class="form-radio-label"> <input class="form-radio-input" type="radio" name="optionsRadios" value="" disabled> <span class="form-radio-sign"></span> </label> </div> <div class="col-sm-9 form-group p-0"> <input class="qInput" type="text" placeholder="option.." id="q'+ maxid +'Option1" name="q'+ maxid +'Option1" style="width: 100%"> </div> <div class="col-sm-2 container-fluid pt-1" style="text-align: center"> <i id="q'+ maxid +'Option1Del" style="cursor:pointer;" class="la la-minus-square la-2x delOption"></i> <i id="q'+ maxid +'Option1Add" style="cursor:pointer;" class="la la-plus-square la-2x addOption"></i> </div> </div> </div> <div style="text-align: right;padding-right:29px;"><span style="font-size:19px;">Complexity Level<i  data-toggle="tooltip" data-placement="bottom" title="Chawala help Chahi di a" style="font-size:20px;" class="la la-question-circle "></i></span> &nbsp; &nbsp; <input id="q'+maxid+'Complexity" name="q'+maxid+'Complexity" type="text" />  <button id="q'+maxid+'Save" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 saveQuestion" disabled style="border:1px solid green;background:white;width:60px;margin:5px 5px !important;"><i  class="fa fa-check" style="color:green;  "></i></button> <button id="q'+maxid+'Del" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 delQuest"  style="border:1px solid red;background:white;width:60px;margin:0px 5px !important;" ><i  class="fa fa-trash" style="color:red;  "></i></button> </div> <hr style="width:70%"> </div></form> ');
                  }
                  else  if($(this).attr('href')==1)
                  {
                 $('#question-block').append('<form  id="q'+maxid+'Form" name="q'+maxid+'Form"><div id="q'+ maxid +'" class=" container p-0 question"style="margin-top: 5px;  ">  <div class="row col-sm-12 " style=" margin: 0px auto"> <div class="col-sm-1 pt-2"> <span class="qNo" id="q_no'+maxid+'">Q'+maxid+'.</span> </div> <div class="col-sm-9 form-group p-0" style="margin: 0"> <input id="q'+ maxid +'Title" name="q'+ maxid +'Title" type="text" class="form-control input-square qInput"  placeholder="Question Title" > </div> <div class="col-sm-2 "> <select id="q'+ maxid +'OptionType" name="q'+ maxid +'OptionType" class="form-control input-square qEdit"><option value="0">Radio</option> <option value="1" selected>Checkbox</option> <option value="2">Text</option> </select> </div> </div> <div id="q'+maxid+'OptionBlock" class="mt-3"  > <div class="row col-sm-12 option" style=" margin:0px 0px 2px 0px "> <div class="col-sm-1 pt-1"> <label class="form-check-label" style="width: 100%" > <input class="form-check-input" type="checkbox" value="" disabled> <span class="form-check-sign" ></span> </label> </div> <div class="col-sm-9 form-group p-0"> <input class="qInput" type="text" placeholder="option.." name="q'+ maxid +'Option1" id="q'+ maxid +'Option1" style="width: 100%"> </div> <div class="col-sm-2 container-fluid pt-1" style="text-align: center"> <i id="q'+ maxid +'Option1Del" style="cursor:pointer;" class="la la-minus-square la-2x delOption"></i> <i id="q'+ maxid +'Option1Add" style="cursor:pointer;" class="la la-plus-square la-2x addOption"></i> </div> </div> </div> <div style="text-align: right;padding-right:29px;"> <span style="font-size:19px;">Complexity Level<i  data-toggle="tooltip" data-placement="bottom" title="Chawala help Chahi di a" style="font-size:20px;" class="la la-question-circle "></i> </span> &nbsp; &nbsp; <input id="q'+maxid+'Complexity" name="q'+maxid+'Complexity" type="text" /> <button id="q'+maxid+'Save" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 saveQuestion" disabled style="border:1px solid green;background:white;width:60px;margin:0px 5px !important;"><i  class="fa fa-check" style="color:green;  "></i></button> <button id="q'+maxid+'Del" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 delQuest"  style="border:1px solid red;background:white;width:60px;margin:0px 5px !important;" ><i  class="fa fa-trash" style="color:red;  "></i></button> </div> <hr style="width:70%"> </div></form> '); }
                   else if($(this).attr('href')==2)
                   {
                   	$('#question-block').append('<form id="q'+maxid+'Form" name="q'+maxid+'Form"><div class="container p-0 question" id="q'+maxid+'"style="margin-top: 5px;  ">  <div class="row col-sm-12 " style=" margin: 0px auto"> <div class="col-sm-1 pt-2 col-xs-1"> <span class="qNo" id="q_no'+maxid+'">Q'+maxid+'.</span> </div> <div class="col-sm-9 form-group p-0 col-xs-2" style="margin: 0"> <input id="q'+maxid+'Title" name="q'+maxid+'Title" type="text" class="form-control input-square qInput"  placeholder="Question Title" > </div> <div class="col-sm-2 col-xs-2 "> <select id="q'+maxid+'OptionType" name="q'+maxid+'OptionType" class="form-control input-square qEdit" > <option value="0">Radio</option> <option value="1">Checkbox</option> <option value="2" selected>Text</option> </select> </div> </div> <div id="q'+maxid+'OptionBlock" class="mt-3" ></div> <div style="text-align: right;padding-right:29px;"><span style="">Complexity Level<i  data-toggle="tooltip" data-placement="bottom" title="Chawala help Chahi di a" style="font-size:22px;" class="la la-question-circle "></i> </span> &nbsp; &nbsp; <input id="q'+maxid+'Complexity" name="q'+maxid+'Complexity" type="text" /> <button id="q'+maxid+'Save" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 saveQuestion" disabled style="border:1px solid green;background:white;width:60px;margin:0px 5px !important;"><i  class="fa fa-check" style="color:green;  "></i></button> <button id="q'+maxid+'Del" class="btn pt-1 pb-1 pr-2 pl-2 mt-2 mb-2 ml-4 mr-4 delQuest"  style="border:1px solid red;background:white;width:60px;margin:0px 5px !important;" ><i  class="fa fa-trash" style="color:red;  "></i></button> </div> <hr style="width:70%"> </div></form>'); }
                         serialize();
                         tooltip();

                         
                         globalScope['slider' + maxid]= new Slider("#q"+maxid+"Complexity", {
                                ticks: [1, 3, 5],
                                ticks_labels: ['Low', 'Medium', 'High'],
                                ticks_snap_bounds: 1
                                });




		});

		$(document).on('change', '.qEdit', function () {  //function to change option type


			if ($(this).val() == 0) {
				var maxid = $(this).attr('id').match(/\d+/);


				$('#q' + maxid + 'OptionBlock').html('<div class="row col-sm-12 option" style=" margin:0px 0px 2px 0px "> <div class="col-sm-1 pt-1"> <label class="form-radio-label"> <input class="form-radio-input" type="radio" name="optionsRadios" value="" disabled> <span class="form-radio-sign"></span> </label> </div> <div class="col-sm-9 form-group p-0"> <input class="qInput" type="text" placeholder="option.." id="q'+ maxid +'Option1" name="q'+ maxid +'Option1" style="width: 100%"> </div> <div class="col-sm-2 container-fluid pt-1" style="text-align: center"> <i id="q'+ maxid +'Option1Del" style="cursor:pointer;" class="la la-minus-square la-2x delOption"></i> <i id="q'+ maxid +'Option1Add" style="cursor:pointer;" class="la la-plus-square la-2x addOption"></i> </div> </div>');
			} else if ($(this).val() == 1) {
				var maxid = $(this).attr('id').match(/\d+/);
				$('#q' + maxid + 'OptionBlock').html('<div class="row col-sm-12 option" style=" margin:0px 0px 2px 0px "> <div class="col-sm-1 pt-1"> <label class="form-check-label" style="width: 100%" > <input class="form-check-input" type="checkbox" value="" disabled> <span class="form-check-sign" ></span> </label> </div> <div class="col-sm-9 form-group p-0"> <input  class="qInput" type="text" placeholder="option.." id="q'+ maxid +'Option1" name="q'+ maxid +'Option1" style="width: 100%"> </div> <div class="col-sm-2 container-fluid pt-1" style="text-align: center"> <i id="q'+ maxid +'Option1Del" style="cursor:pointer;" class="la la-minus-square la-2x delOption"></i> <i id="q'+ maxid +'Option1Add" style="cursor:pointer;" class="la la-plus-square la-2x addOption"></i> </div> </div>'); } else if ($(this).val() == 2) {
				var maxid = $(this).attr('id').match(/\d+/);

				$('#q' + maxid + 'OptionBlock').html('');
			}
		});
		$(document).on('click', '.addOption', function () {

			var targetid = $(this).attr('id');//.match(/\d+/)[1];
             target=targetid.split('Option');
             targetid=parseInt(target[0].match(/\d+/)[0]);
			 maxid=parseInt(target[1].match(/\d+/)[0]);
			 maxid++;
            /*
			var totaloptions = $('#q'+targetid+'OptionBlock');
			maxid = $(totaloptions[0]).last().attr("id");
			console.log(maxid);
			maxid =maxid.match(/\d+/)[0];
			maxid=parseInt(maxid);
			maxid= maxid +1; */

			console.log('opt',targetid);
			console.log("max",maxid);
			 //var newId  = maxid++;
			if ($('#q' + targetid + 'OptionType').val() == 0) {
				$('#q' + targetid + 'OptionBlock').append('<div class="row col-sm-12 option" style=" margin:0px 0px 2px 0px "> <div class="col-sm-1 pt-1"> <label class="form-radio-label"> <input class="form-radio-input" type="radio" name="optionsRadios" value="" disabled> <span class="form-radio-sign"></span> </label> </div> <div class="col-sm-9 form-group p-0"> <input class="qInput" type="text" placeholder="option.." id="q'+ targetid +'Option'+maxid+'" name="q'+ targetid +'Option'+maxid+'" style="width: 100%"> </div> <div class="col-sm-2 container-fluid pt-1" style="text-align: center"> <i id="q'+ targetid +'Option'+maxid+'Del" style="cursor:pointer;" class="la la-minus-square la-2x delOption"></i> <i id="q'+ targetid +'Option'+maxid+'Add" style="cursor:pointer;" class="la la-plus-square la-2x addOption"></i> </div> </div>'); }
			else if ($('#q' + targetid + 'OptionType').val() == 1) {
				$('#q' + targetid + 'OptionBlock').append('<div class="row col-sm-12 option" style=" margin:0px 0px 2px 0px "> <div class="col-sm-1 pt-1"> <label class="form-check-label" style="width: 100%" > <input class="form-check-input" type="checkbox" value="" disabled> <span class="form-check-sign" ></span> </label> </div> <div class="col-sm-9 form-group p-0"> <input  class="qInput" type="text" placeholder="option.." id="q'+ targetid +'Option'+maxid+'" name="q'+ targetid +'Option'+maxid+'" style="width: 100%"> </div> <div class="col-sm-2 container-fluid pt-1" style="text-align: center"> <i id="q'+ targetid +'Option'+maxid+'Del" style="cursor:pointer;" class="la la-minus-square la-2x delOption"></i> <i id="q'+ targetid +'Option'+maxid+'Add" style="cursor:pointer;" class="la la-plus-square la-2x addOption"></i> </div> </div>'); }

		});
		$(document).on('click', '.delOption', function () {
             let sid=id;
			 let qid=$(this).attr("id");
			  target=qid.split('Option');
             qid=parseInt(target[0].match(/\d+/)[0]);
			 oid=parseInt(target[1].match(/\d+/)[0]);

			 //console.log(sid);
			 //console.log(qid);
			 //console.log(oid);
			   var data = {
            'qid': qid,
            'oid': oid,
			'sid': sid
       };
			  $.ajax({
                type: 'post',
                url: '/customer/updateoption',
                data: data,
                dataType: 'json'
            })
            .done( (response) =>{
               // console.log(response);
                if(response ==1){

				  console.log('ajax res', response);
				  var delop=$(this).parent().parent();
			      $(delop).remove();
			    }
                else {
				  console.log('ajax res not found');
                }
            })



		});

	});
</script>
                  